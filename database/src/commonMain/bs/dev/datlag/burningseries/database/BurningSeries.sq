import kotlin.Boolean;
import kotlin.Int;

CREATE TABLE IF NOT EXISTS Series(
    hrefPrimary TEXT NOT NULL PRIMARY KEY,
    href TEXT NOT NULL,
    season INTEGER AS Int,
    coverHref TEXT DEFAULT NULL,
    fullTitle TEXT NOT NULL,
    mainTitle TEXT DEFAULT NULL,
    subTitle TEXT DEFAULT NULL,
    isAnime INTEGER AS Boolean NOT NULL DEFAULT 0,
    favoriteSince INTEGER NOT NULL DEFAULT 0
);

insertSeriesOrIgnore:
INSERT OR IGNORE INTO Series(
    hrefPrimary,
    href,
    season,
    coverHref,
    fullTitle,
    mainTitle,
    subTitle,
    isAnime,
    favoriteSince
) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);

favoriteSeries:
SELECT * FROM Series WHERE favoriteSince > 0 ORDER BY favoriteSince DESC;

upsertSeriesFavoriteSince {
    UPDATE Series SET favoriteSince = :since WHERE hrefPrimary = :hrefPrimary OR hrefPrimary LIKE :hrefPrimary;

    INSERT OR IGNORE INTO Series(hrefPrimary, href, season, coverHref, fullTitle, mainTitle, subTitle, isAnime, favoriteSince) VALUES (:hrefPrimary, :href, :season, :coverHref, :fullTitle, :mainTitle, :subTitle, :isAnime, :since);
}

seriesIsFavoriteByHref:
SELECT favoriteSince > 0 FROM Series WHERE hrefPrimary = :hrefPrimary OR hrefPrimary LIKE :hrefPrimary;